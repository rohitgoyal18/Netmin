!/bin/bash
user=`whoami`
clear
if [ $user != root ]
then
	echo " You need to log in as root to run this script "
fi
echo
echo
echo
echo
echo    "                   You Are Logged is as Root"

echo -n "                   Passsword : "
stty -echo
read passwd
stty sane
if test $passwd = "nettech"
then
	:
else
	echo "Wrong Password"
	exit
fi

while [ 1 ]
do
clear
echo
echo 
echo
tput cup 9 30
echo '--------------------------------------------------'
tput cup 10 30
echo '|  1.  Create A DNS Record                       |'
tput cup 11 30
echo '|  2.  Create A User                             |'
tput cup 12 30
echo '|  3.  List the processes running                |'
tput cup 13 30
echo '|  4.  Change password                           |'
tput cup 14 30
echo '|  5.  Delete name server                        |'
tput cup 15 30
echo '|  6.  NS Query                                  |'
tput cup 16 30
echo '|  7.  NFS Import                                |'
tput cup 17 30
echo '|  8.  NFS Export                                |'
tput cup 18 30
echo '|  9.  Netconfig                                 | '
tput cup 19 30
echo '|  10. Samba sharing                             |'
tput cup 20 30
echo '|  11. Create a Web Server                       |'
tput cup 21 30
echo '|  12. Undo Samba sharing                        |'
tput cup 22 30
echo '|  13. Undo NFS import                           |'
tput cup 23 30
echo '|  14. Undo NFS export                           |'
tput cup 24 30
echo '|  Q. Quit                                       |'  
tput cup 25 30
echo '|  Enter your choice                             |'
tput cup 26 30
echo '--------------------------------------------------'
tput cup 25 55 
read  choice
case $choice in
4)     	clear
	tput cup 10 30
	printf " Name the user whose password is to be changed: "
	read name
	tput cup 11 30    
	echo -n "Enter the password : "
	stty -echo
	read pass
	stty sane
	tput cup 12 30
	echo $pass | passwd --stdin $name
	tput cup 14 30
	echo "Press enter to return to the main menu.  "
	read
	;;
13)  ./nfsimpundo
	echo "Press enter to return to the main menu "
	read;;
14)
	./nfsexpundo 
	echo "Press enter to return to the main menu "
	read ;;	
11) ./httpd
	echo "The directory sharing was successfully undone"
	echo "Press enter to return to main menu"
	read;;
12) ./sambadel
	
	echo "Press enter to return to main menu. "
	read
	;;
3)
	ps -aux | more

	;;
1)
	clear
	tput cup 10 30
	echo -n "Enter the name of the server : "
	read name
	tput cup 11 30
	echo -n "Enter The IP Address : "
	read ip
	tput cup 12 30
	echo -n "Enter Your Email Address : "
	read email
	echo "zone \"$name\" {
	type master;
	file \"/var/named/$name.hosts\";
	};" >> /etc/named.conf

echo "
\$ttl 38400
$name.	IN	SOA	Jupiter. $email. (
			120`date +%N | sed -n 's/000//p'` 
			10800
			3600
			604800
			38400 )
$name.	IN	NS	Jupiter.
$name.	IN	A	$ip" >>/var/named/$name.hosts
	service named restart > /dev/null	
	tput cup 15 30
	echo "The DNS entry has been properly created." 
	tput cup 16 30
	echo "Press enter to return to the main menu. "
	read 
;;

6)
	clear
	tput cup 10 30
	printf "Enter The Web Site Address : "
	read name
	tput cup 11 30;
	echo $name | nslookup -sil | sed -n '5p'
	tput cup 12 30;
	echo " Press enter to return to the main menu. "
	read ;;
2)
	clear
	tput cup 10 30
	echo -n "Enter the name of the user:"
	read user
	if  `grep $user /etc/passwd >>/dev/null` 
	then 
	tput cup 11 30
	echo "User already exixts "
	tput cup 12 30
	echo -n "press enter to return to main menu "
	read
	else
	useradd $user 2>/dev/null
	passwd $user
	tput cup 11 30
	echo "$user was added successfully"
	tput cup 12 30
	echo -n "Press enter to continue. "
	read
	fi

	;;
10)
	 ./samba.sh
	echo " Press Enter to return to main menu. "
	read ;;
Q)

	clear 
		exit;;
q)
	clear
	      exit;;
5)	clear
	tput cup 10 30
	echo -n "Enter the name to delete :"
	read name

	sed /$name/,/\}\;/d /etc/named.conf > /root/bin/abc
	cp  /root/bin/abc  /etc/named.conf
	rm -rf /var/named/$name.hosts
	service named restart >> /dev/null
	tput cup 11 30
	echo "The entry was successfully deleted."
	tput cup 12 30
	echo "Press enter to continue."
	read
	;;
7)	./nfsimport;;
8)	./nfsexport;;
9)	./setipaddress;;
*)
	echo "IMPROPER CHOICE"
	echo "Press Enter to continue"
	read id
esac
done
